"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var cellType="footer",_default={name:"VxeTableFooter",props:{footerData:Array,tableColumn:Array,visibleColumn:Array,fixedColumn:Array,size:String,fixedType:String},mounted:function(){var e=this.$parent,t=this.$el,l=this.$refs,o=this.fixedType,r=e.elemStore,n="".concat(o||"main","-footer-");r["".concat(n,"wrapper")]=t,r["".concat(n,"table")]=l.table,r["".concat(n,"colgroup")]=l.colgroup,r["".concat(n,"list")]=l.tfoot,r["".concat(n,"xSpace")]=l.xSpace},render:function(L){var e=this._e,P=this.$parent,k=this.fixedType,t=this.fixedColumn,E=this.tableColumn,q=this.footerData,A=P.$listeners,l=P.tId,o=P.footerRowClassName,D=P.footerCellClassName,r=P.footerRowStyle,O=P.footerCellStyle,X=P.footerAlign,N=P.footerSpanMethod,R=P.align,M=P.scrollXLoad,j=P.columnKey,z=P.showFooterOverflow,B=P.currentColumn,H=P.overflowX,n=P.scrollbarWidth,K=P.tooltipOpts;return N||(k&&z?E=t:M&&k&&(E=t)),L("div",{class:["vxe-table--footer-wrapper",k?"fixed-".concat(k,"--wrapper"):"body--wrapper"],attrs:{"data-tid":l},on:{scroll:this.scrollEvent}},[k?e():L("div",{class:"vxe-body--x-space",ref:"xSpace"}),L("table",{class:"vxe-table--footer",attrs:{"data-tid":l,cellspacing:0,cellpadding:0,border:0},ref:"table"},[L("colgroup",{ref:"colgroup"},E.map(function(e,t){return L("col",{attrs:{name:e.id},key:t})}).concat(n?[L("col",{attrs:{name:"col_gutter"}})]:[])),L("tfoot",{ref:"tfoot"},q.map(function(U,F){return L("tr",{class:["vxe-footer--row",o?_xeUtils.default.isFunction(o)?o({$table:P,$rowIndex:F,fixed:k,type:cellType}):o:""],style:r?_xeUtils.default.isFunction(r)?r({$table:P,$rowIndex:F,fixed:k,type:cellType}):r:null},E.map(function(t,l){var e,o=t.showFooterOverflow,r=t.footerAlign,n=t.align,i=t.footerClassName,a=K.enabled,c=t.children&&t.children.length,s=k?t.fixed!==k&&!c:t.fixed&&H,d=_xeUtils.default.isUndefined(o)||_xeUtils.default.isNull(o)?z:o,f=r||n||X||R,u="ellipsis"===d,p="title"===d,x=!0===d||"tooltip"===d,m=p||x||u,y={"data-colid":t.id},v={},_=P.getColumnIndex(t),b=P._getColumnIndex(t),g=b,T={$table:P,$rowIndex:F,column:t,columnIndex:_,$columnIndex:l,_columnIndex:b,itemIndex:g,items:U,fixed:k,type:cellType,data:q};if(M&&!m&&(u=m=!0),(p||x||a)&&(v.mouseenter=function(e){p?_tools.DomTools.updateCellTitle(e,t):(x||a)&&P.triggerFooterTooltipEvent(e,T)}),(x||a)&&(v.mouseleave=function(e){(x||a)&&P.handleTargetLeaveEvent(e)}),A["footer-cell-click"]&&(v.click=function(e){_tools.UtilTools.emitEvent(P,"footer-cell-click",[{$table:P,$rowIndex:F,column:t,columnIndex:_,$columnIndex:l,_columnIndex:b,itemIndex:g,items:U,fixed:k,type:cellType,data:q,cell:e.currentTarget},e])}),A["footer-cell-dblclick"]&&(v.dblclick=function(e){_tools.UtilTools.emitEvent(P,"footer-cell-dblclick",[{$table:P,$rowIndex:F,column:t,columnIndex:_,$columnIndex:l,_columnIndex:b,itemIndex:g,items:U,fixed:k,type:cellType,data:q,cell:e.currentTarget},e])}),N){var h=N(T)||{},$=h.rowspan,w=void 0===$?1:$,I=h.colspan,C=void 0===I?1:I;if(!w||!C)return null;1<w&&(y.rowspan=w),1<C&&(y.colspan=C)}var S="seq"===t.type||"index"===t.type?"seq":t.type;return L("td",{class:["vxe-footer--column",t.id,(_defineProperty(e={},"col--".concat(f),f),_defineProperty(e,"col--".concat(S),S),_defineProperty(e,"col--last",l===E.length-1),_defineProperty(e,"fixed--hidden",s),_defineProperty(e,"col--ellipsis",m),_defineProperty(e,"col--current",B===t),e),_tools.UtilTools.getClass(i,T),_tools.UtilTools.getClass(D,T)],attrs:y,style:O?_xeUtils.default.isFunction(O)?O(T):O:null,on:v,key:j?t.id:l},[L("div",{class:["vxe-cell",{"c--title":p,"c--tooltip":x,"c--ellipsis":u}]},t.renderFooter(L,T))])}).concat(n?[L("td",{class:"col--gutter"})]:[]))}))])])},methods:{scrollEvent:function(e){var t=this.$parent,l=this.fixedType,o=t.$refs,r=t.scrollXLoad,n=t.triggerScrollXEvent,i=t.lastScrollLeft,a=o.tableHeader,c=a?a.$el:null,s=o.tableBody.$el,d=o.tableFooter.$el.scrollLeft,f=d!==i;t.lastScrollLeft=d,t.lastScrollTime=Date.now(),c&&(c.scrollLeft=d),s&&(s.scrollLeft=d),r&&f&&n(e),_tools.UtilTools.emitEvent(t,"scroll",[{type:cellType,fixed:l,scrollTop:s.scrollTop,scrollLeft:d,isX:f,isY:!1,$table:t,$event:e},e])}}};exports.default=_default;