"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.GlobalEvent=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_dom=_interopRequireDefault(require("./dom"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var lastWheelTime,wheelEventTimeout,browse=_dom.default.browse,wheelName=browse.firefox?"DOMMouseScroll":"mousewheel",eventStore=[];function handleWheelEvent(l){eventStore.forEach(function(e){var t=e.comp,n=e.type,o=e.cb;"syncwheel"===n&&o.call(t,l)}),wheelEventTimeout=setTimeout(function(){lastWheelTime+300>Date.now()?handleWheelEvent(l):wheelEventTimeout=null},50)}function bindSyncwheelEvent(e){wheelEventTimeout||handleWheelEvent(e),lastWheelTime=Date.now()}var GlobalEvent={on:function(e,t,n){n&&eventStore.push({comp:e,type:t,cb:n})},off:function(t,n){_xeUtils.default.remove(eventStore,function(e){return e.comp===t&&e.type===n})},trigger:function(l){var r=l.type===wheelName;eventStore.forEach(function(e){var t=e.comp,n=e.type,o=e.cb;(n===l.type||r&&"mousewheel"===n)&&o.call(t,l)}),r&&eventStore.some(function(e){return"syncwheel"===e.type})&&bindSyncwheelEvent(l)}};exports.GlobalEvent=GlobalEvent,browse.isDoc&&(document.addEventListener("keydown",GlobalEvent.trigger,!1),document.addEventListener("contextmenu",GlobalEvent.trigger,!1),window.addEventListener("mousedown",GlobalEvent.trigger,!1),window.addEventListener("blur",GlobalEvent.trigger,!1),window.addEventListener("resize",GlobalEvent.trigger,!1),window.addEventListener(wheelName,GlobalEvent.trigger,!1));var _default=GlobalEvent;exports.default=_default;